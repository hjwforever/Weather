{% load static %}
<!DOCTYPE html>
<html lang="zxx">
<head>
    <title>Six Single Dogs Weather</title>
    <meta charset="UTF-8">
    <meta name="description" content="天气预测">
    <meta name="keywords" content="天气预测,weather,predict">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon -->
    <link href="{% static 'img/favicon.ico' %}" rel="shortcut icon"/>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/style.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/animate.css' %}"/>


    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="{% static 'echarts.min.js' %}"></script>
    {#    hao123header#}
    <noscript>
        <meta http-equiv="refresh" content="0; URL='/tianqi/?__noscript__-=1'"/>
    </noscript>

    {#    <meta charset="utf-8">#}
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="referrer" content="always">

    <link rel="stylesheet" type="text/css" href="http://s1.hao123img.com/resource/fe/pkg/aio-eef856ab5.1fd5261cd.css"/>
    <link rel="stylesheet" type="text/css" href="http://s0.hao123img.com/resource/tianqi/pkg/aio-519f9ba.08a30c5.css"/>
    <link rel="stylesheet" type="text/css" href="http://s2.hao123img.com/resource/fe/pkg/aio-8155b5719.e2c46864a.css"/>

</head>

<!-- body start -->
<body>
<!-- Page Preloder -->
<div id="preloder">
    <div class="loader"></div>
</div>
<!-- Page Preloder end -->


<!-- Header section -->
<header class="header-section">
    <div class="container">
        <!-- logo -->
        <a class="site-logo" href="{% url 'index' %}" style="padding-top: 0" title="返回首页">
            <img src="{% static 'img/favicon.ico' %}" alt="返回首页" height="40" width="40">
        </a>
        <a style="font-size: 40px;color: orange;padding-left: 20px" href="{% url 'index' %}" title="返回首页">Six-Single-Dogs</a>
        <div class="user-panel">

                {% if has_login %}
                    <a href="{% url 'logout' %}" style="font-size: 20px;color: white">
                    {{ "登出" }}
                     </a>
                {% else %}
                    <a href="{% url 'login' %}" style="font-size: 20px;color: white">
                    {{ "登录" }}
                     </a>
                    <a href="{% url 'register' %}" style="color: white;font-size: 20px"> / 注册</a>
                {% endif %}


        </div>
        <!-- responsive -->
        <div class="nav-switch">
            <i class="fa fa-bars"></i>
        </div>
        <!-- site menu -->
        <nav class="main-menu">
            <ul>
                <li><a href="{% url 'index' %}" style="font-size: 20px;color: orange">首页</a></li>
                <li><a href="{% url 'history' %}" style="font-size: 20px;color: orange">历史天气</a></li>
            </ul>
        </nav>
    </div>
</header>
<!-- Header section end -->


<!-- hao123 section start -->
<div class="page-layer status-day">
    <div class="header-layer">
        <div class="weather-info-layer">
            <div class="weather-info-inner">
                <div class="real-time-box">
                    <div class="icon icon-w w-00"></div>
                    <div class="text"><span class="label">今日当前天气</span>
                        <div class="temperature"><span class="num" id="tvalue">{{ queryset.0.tavg | floatformat:0 }}
                        </span><span class="symbol">℃</span></div>
                        <div class="others">
                            <div class="line-1"><span>晴</span><span>空气质量良</span></div>
                            <div class="line-2"><span>PM2.5 : 74</span><span>气压 : 991</span><span>湿度 : 46</span></div>
                        </div>
                    </div>
                </div>
                <div class="forecast-box">
                    <div class="forecast-item">
                        <div class="info">
                            <div class="icon icon-w w-01"><i class="icon-date ming"></i></div>
                            <div class="temp">21-31<span class="symbol">℃</span></div>
                        </div>
                        <div class="text">多云&nbsp;&nbsp;微风&nbsp;&nbsp;空气质量优</div>
                    </div>
                    <div class="forecast-item last">
                        <div class="info">
                            <div class="icon icon-w w-08"><i class="icon-date hou"></i></div>
                            {#07 08 09 分别对应小雨中雨大雨#}
                            <div class="temp">24-33<span class="symbol">℃</span></div>
                        </div>
                        <div class="text">中雨&nbsp;&nbsp;微风&nbsp;&nbsp;空气质量优</div>
                    </div>
                </div>
                <div class="fifteen-days-box">
                    <div class="slide-layer">
                        <div class="slide-inner">
                            <div class="slide-item">
                                <div class="temp">07月05日&nbsp;(周日)&nbsp;22℃ /&nbsp;30℃</div>
                                <div class="weather"><span class="text">雷阵雨</span><i class="icon-air icon-air-1"></i>
                                </div>
                                <div class="wind">无持续风向&nbsp;微风</div>
                            </div>
                            <div class="slide-item">
                                <div class="temp">07月06日&nbsp;(周一)&nbsp;21℃ /&nbsp;31℃</div>
                                <div class="weather"><span class="text">多云</span><i class="icon-air icon-air-1"></i>
                                </div>
                                <div class="wind">无持续风向&nbsp;微风</div>
                            </div>
                            <div class="slide-item">
                                <div class="temp">07月07日&nbsp;(周二)&nbsp;24℃ /&nbsp;33℃</div>
                                <div class="weather"><span class="text">多云</span><i class="icon-air icon-air-1"></i>
                                </div>
                                <div class="wind">无持续风向&nbsp;微风</div>
                            </div>
                            <div class="slide-item">
                                <div class="temp">07月08日&nbsp;(周三)&nbsp;22℃ /&nbsp;33℃</div>
                                <div class="weather"><span class="text">多云</span><i class="icon-air icon-air-2"></i>
                                </div>
                                <div class="wind">东北风&nbsp;3-4级</div>
                            </div>
                        </div>
                        <a href="javascript:" class="prev"></a><a href="javascript:" class="next"></a></div>
                    <a class="label" href="//www.weather.com.cn/weather15d/101010100.shtml" target="_blank">
                        <div class="text">15日天气</div>
                    </a></div>
                <div class="data-source">数据来自中国天气网</div>
            </div>
        </div>
    </div>
</div>
<!-- hao123 section end -->


<!-- Latest news section -->
<div class="latest-news-section">
    <div class="ln-title" style="font-size: 30px;padding-top: 23px">当日天气</div>
    <div class="news-ticker">
        <div class="news-ticker-contant">
            <div class="nt-item" style="font-size: 20px"><span class="new" style="font-size: 20px">北京</span>31℃&nbsp;晴&nbsp;空气质量优
            </div>
            <div class="nt-item" style="font-size: 20px"><span class="strategy" style="font-size: 20px">天津</span>22℃&nbsp;晴&nbsp;空气质量优
            </div>
            <div class="nt-item" style="font-size: 20px"><span class="racing" style="font-size: 20px">湖北</span>35℃&nbsp;晴&nbsp;空气质量优
            </div>
            <div class="nt-item" style="font-size: 20px"><span class="new" style="font-size: 20px">胡建</span>31℃&nbsp;晴&nbsp;空气质量优
            </div>
            <div class="nt-item" style="font-size: 20px"><span class="strategy" style="font-size: 20px">河兰</span>22℃&nbsp;晴&nbsp;空气质量优
            </div>
            <div class="nt-item" style="font-size: 20px"><span class="racing" style="font-size: 20px">内蒙古</span>35℃&nbsp;晴&nbsp;空气质量优
            </div>
            <div class="nt-item" style="font-size: 20px"><span class="strategy" style="font-size: 20px">江西</span>22℃&nbsp;晴&nbsp;空气质量优
            </div>
        </div>
    </div>
</div>
<!-- Latest news section end -->


<!--为ECharts准备一个具备大小的Dom-->
<div id="main" style="background:url({% static 'img/pattern.png' %});width: 100%;height: 80%;"></div>
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));
    // 指定图表的配置项和数据
    var colors = ['red','#5793f3', '#ffb320', 'orange','white','pink'];
    var option = {
    baseOption: {
        timeline: {
            axisType: 'category',
            // realtime: false,
            // loop: false,
            autoPlay: true,
            // currentIndex: 2,
            playInterval: 2000,
            // controlStyle: {
            //     position: 'left'
            // },
            lineStyle:{
                 color: colors[0],
            },
            controlStyle:{
                 color: colors[0],
                 borderColor:colors[0],
                 borderWidth: 2,
            },
            label:{
                 color: 'yellow',
            },
            data: [
                '未来一周',
                {
                    value: '近十年同一天',
{#                    tooltip: {#}
{#                        formatter: '{b} 部分数据缺失！'#}
{#                    },#}
                    symbol: 'diamond',
                    symbolSize: 20
                },
            ],
            // label: {
            //     formatter : function(s) {
            //         return (new Date(s)).getFullYear();
            //     }
            // }
        },
        title: {
            left: '10%',
            top: '1%',
{#            fontsize: 3,#}
{#            subtextStyle: {#}
{#                color: 'green',//'white'#}
{#                },#}
{#            subtext: '数据来自国家统计局'#}
        },
        tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross'
        },

        right: '20%',
        top: '3%',
        },
        calculable : true,
        grid: {
        left: '8%',
        right: '8%',
        bottom: '10%',
        containLabel: true
    },
        toolbox: {
            color: colors[0],
            show: true,
            right:'10%',
            top: '3%',
            feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                dataView: {readOnly: false},
{#                dataView: {#}
{#                // 数据视图#}
{#                optionToContent: (opt) => {#}
{#                    var axisData = opt.xAxis[0].data;#}
{#                    var series = opt.series;#}
{#                    var table = `<div class="echartstableview"><table style="width:100%;text-align:center">#}
{#                                    <thead><tr><th>时间</th>`;#}
{#                    series.forEach(( element, index) => {#}
{#                        table += `<th>${element.name}</th>`;#}
{#                    })#}
{#                    table += `</tr></thead><tbody>`;#}
{#                    axisData.forEach(( date, index) => {#}
{#                        table += `<tr><td>${date}</td>`;#}
{#                        series.forEach(( series_, index_) => {#}
{#                            table += `<td>${series_.data[index]}</td>`;#}
{#                        })  #}
{#                        table += `</tr>`;#}
{#                    })#}
{#                    table += '</tbody></table></div>';#}
{#                    return table;#}
{#                },#}
                magicType: {type: ['line', 'bar']},
                restore: {},
                saveAsImage: {},
            },
             iconStyle:{
                    normal:{
                      color:colors[5],//设置颜色
                    }
                }
        },
        xAxis: [
            {
                'type':'category',
                'axisLabel':{
                    'interval':0,
                    onZero: false,
                    },
                splitLine: {show: false}
            }
        ],
        yAxis: [
            {
                type: 'value',
                boundaryGap: false,
                axisTick: {
                alignWithLabel: true
            },
                axisLine: {
                    onZero: false,
                    lineStyle: {
                    color: colors[2]
                    }
                },
                min: function (value) {
                    return value.min - 10;
                     },
                max: function (value) {
                    return value.max + 10;
                    }
            }
        ],
    },
    options: [
        {
            legend: {
            top: '3%',
            color: colors[2],
            textStyle:{
                            fontSize: 18,
                            color: colors[2]
                        },
            data: ['平均温度'],
            selected: {
                '最高温度': false, '最低温度': false,
            },
            },
            title: {
                text: '未来一周',
                textStyle:{
                    color: colors[2],
                    },
                },
            xAxis: [
            {
                'data':[
                {% for row in predict_queryset %}
                    "{{ row.date }}",
                {% endfor %}
              ],
                axisLine: {
                lineStyle: {
                    color: colors[2]
                }
            },
            }
        ],
            yAxis: [
            {
                axisLine: {
                    onZero: false,
                    lineStyle: {
                    color: colors[2]
                    }
                },
            }
        ],
            series: [
            {
                    name: '最高温度',
                    type: 'line',
              },{
                name: '平均温度',
                type: 'line',
                smooth: true,
                color: colors[2],
                lineStyle: {
                        color: colors[2],
                        width: 4,
                    },
                data: [ "{{ queryset.0.tavg | floatformat:0 }}",
                {% for row in predict_queryset %}
                    "{{ row.tavg | floatformat:0}}",
                {% endfor %}
              ],},
              {
                    name: '最低温度',
                    type: 'line',
              },

            ]
        },
        {
            legend: {
            top: '3%',
            color: colors[1],
            textStyle:{
                            fontSize: 18,
                            color: colors[1]
                        },
            data: ['最高温度','平均温度','最低温度'],
            selected: {
                '最高温度': true, '最低温度': true,'平均温度': true,
            },
            },
            title: {
                text: '近10年同一天',
                textStyle:{
                    color: colors[1],
                    },
                },
            xAxis: [
            {
                'data':[
                {% for row in everyyeartodayhistory %}
                    "{{ row.date }}",
                {% endfor %}
              ],
                axisLine: {
                lineStyle: {
                    color: colors[1]
                }
            },
            }
        ],
            yAxis: [
            {
                axisLine: {
                    onZero: false,
                    lineStyle: {
                    color: colors[1]
                    }
                },
            }
        ],
            series : [
                 {
                    name: '最高温度',
                    type: 'line',
                    color: colors[0],
                    lineStyle: {
                        color: colors[0],
                        width: 4,
                    },
                    smooth: true,
                    data: [
                        {% for row in everyyeartodayhistory %}
                            "{{ row.tmax | floatformat:0}}",
                        {% endfor %}
                    ],
              },
              {
                    name: '最低温度',
                    type: 'line',
                    color: colors[1],
                    lineStyle: {
                        color: colors[1],
                        width: 4,
                    },
                    smooth: true,
                    data: [
                        {% for row in everyyeartodayhistory %}
                            "{{ row.tmin | floatformat:0}}",
                        {% endfor %}
                    ],
              },
                {
                    name: '平均温度',
                    type: 'line',
                    color: colors[2],
                    lineStyle: {
                        color: colors[2],
                        width: 4,
                    },
                    smooth: true,
                    data: [
                        {% for row in everyyeartodayhistory %}
                            "{{ row.tavg | floatformat:0}}",
                        {% endfor %}
                    ],
              },
            ]
        },

    ]
};

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
</script>
</body>

<!-- Footer top section -->
<section class="footer-top-section">
    <p style="text-align: center;color: #ffa500;font-size: 50px">Six-Single-Dogs</p>
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6">
                <div class="footer-widget">
                    <h4 class="fw-title" style="font-size: 20px">小组程猿</h4>
                    <div class="top-comment">
                        <div class="tc-item">
                            <div class="tc-thumb set-bg" data-setbg="{% static 'img/authors/1.jpg' %}"></div>
                            <div class="tc-content">
                                <p><a href="#" style="font-size: 15px">胡江浩</a> <span style="font-size: 15px">单身待嫁</span>
                                </p>
                                <div class="tc-date">May&nbsp;3&nbsp;,2000</div>
                            </div>
                        </div>
                        <div class="tc-item">
                            <div class="tc-thumb set-bg" data-setbg="{% static 'img/authors/2.jpg' %}"></div>
                            <div class="tc-content">
                                <p><a href="#" style="font-size: 15px">陈付鑫</a> <span style="font-size: 15px">游戏狂魔</span>
                                </p>
                                <div class="tc-date">February&nbsp;29&nbsp;,2000</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="footer-widget">
                    <h4 class="fw-title" style="font-size: 20px">小组程猿</h4>
                    <div class="top-comment">
                        <div class="tc-item">
                            <div class="tc-thumb set-bg" data-setbg="{% static 'img/authors/3.jpg' %}"></div>
                            <div class="tc-content">
                                <p><a href="#" style="font-size: 15px">陈庆洋</a> <span style="font-size: 15px">天才少年</span>
                                </p>
                                <div class="tc-date">May&nbsp;14&nbsp;,1999</div>
                            </div>
                        </div>
                        <div class="tc-item">
                            <div class="tc-thumb set-bg" data-setbg="{% static 'img/authors/4.jpg' %}"></div>
                            <div class="tc-content">
                                <p><a href="#" style="font-size: 15px">邓硕</a> <span style="font-size: 15px">内蒙大汉</span>
                                </p>
                                <div class="tc-date">July&nbsp;18&nbsp;,2000</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="footer-widget">
                    <h4 class="fw-title" style="font-size: 20px">小组程猿</h4>
                    <div class="top-comment">
                        <div class="tc-item">
                            <div class="tc-thumb set-bg" data-setbg="{% static 'img/authors/5.jpg' %}"></div>
                            <div class="tc-content">
                                <p><a href="#" style="font-size: 15px">黄俊雯</a> <span style="font-size: 15px">快乐小伙</span>
                                </p>
                                <div class="tc-date">October&nbsp;29&nbsp;,2000</div>
                            </div>
                        </div>
                        <div class="tc-item">
                            <div class="tc-thumb set-bg" data-setbg="{% static 'img/authors/6.jpg' %}"></div>
                            <div class="tc-content">
                                <p><a href="#" style="font-size: 15px">黄琳棠</a> <span style="font-size: 15px">大龄剩男</span>
                                </p>
                                <div class="tc-date">May&nbsp;18&nbsp;,2000</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Footer top section end -->


<!-- Footer section -->
<footer class="footer-section">
    <div class="container">
        <ul class="footer-menu">
            <li><a href="{% url 'index' %}">首页</a></li>
            <li><a href="{% url 'history' %}">历史天气</a></li>
        </ul>
        <p class="copyright"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;<script>document.write(new Date().getFullYear().toString());</script>
            All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a
                    href="https://colorlib.com" target="_blank">Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
        </p>
    </div>
</footer>
<!-- Footer section end -->


<!--====== Javascripts & Jquery ======-->
<script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<script src="{% static 'js/jquery.marquee.min.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
</body>
</html>